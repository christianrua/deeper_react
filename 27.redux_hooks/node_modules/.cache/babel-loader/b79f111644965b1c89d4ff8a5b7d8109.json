{"ast":null,"code":"import { useState, useEffect } from 'react';\nlet globalState = {};\nlet listeners = [];\nlet actions = {};\nexport const useStore = () => {\n  const setState = useState(globalState)[1];\n\n  const dispatch = (actionIdentifier, payload) => {\n    const newState = actions[actionIdentifier](globalState, payload);\n    globalState = { ...globalState,\n      ...newState\n    };\n\n    for (const listener of listeners) {\n      listener(globalState);\n    }\n  };\n\n  useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      listeners = listeners.filter(li => li !== setState);\n    };\n  }, [setState]);\n  return [globalState, dispatch];\n};\nexport const initStore = (userActions, initialState) => {\n  if (initialState) {\n    globalState = { ...globalState,\n      ...initialState\n    };\n  }\n\n  actions = { ...actions,\n    ...userActions\n  };\n};","map":{"version":3,"sources":["/home/chr1st14n_ru4/development/react_course/27.redux_hooks/src/hooks-store/store.js"],"names":["useState","useEffect","globalState","listeners","actions","useStore","setState","dispatch","actionIdentifier","payload","newState","listener","push","filter","li","initStore","userActions","initialState"],"mappings":"AAAA,SAAQA,QAAR,EAAiBC,SAAjB,QAAiC,OAAjC;AAEA,IAAIC,WAAW,GAAG,EAAlB;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,OAAO,GAAG,EAAd;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC1B,QAAMC,QAAQ,GAAGN,QAAQ,CAACE,WAAD,CAAR,CAAsB,CAAtB,CAAjB;;AAEA,QAAMK,QAAQ,GAAG,CAACC,gBAAD,EAAmBC,OAAnB,KAA+B;AAC5C,UAAMC,QAAQ,GAAGN,OAAO,CAACI,gBAAD,CAAP,CAA0BN,WAA1B,EAAuCO,OAAvC,CAAjB;AACAP,IAAAA,WAAW,GAAG,EAAC,GAAGA,WAAJ;AAAiB,SAAGQ;AAApB,KAAd;;AAEA,SAAK,MAAMC,QAAX,IAAuBR,SAAvB,EAAiC;AAC7BQ,MAAAA,QAAQ,CAACT,WAAD,CAAR;AACH;AACJ,GAPD;;AASAD,EAAAA,SAAS,CAAC,MAAM;AACZE,IAAAA,SAAS,CAACS,IAAV,CAAeN,QAAf;AAEA,WAAO,MAAM;AACTH,MAAAA,SAAS,GAAGA,SAAS,CAACU,MAAV,CAAiBC,EAAE,IAAIA,EAAE,KAAKR,QAA9B,CAAZ;AACH,KAFD;AAGH,GANQ,EAMP,CAACA,QAAD,CANO,CAAT;AAQA,SAAO,CAACJ,WAAD,EAAcK,QAAd,CAAP;AAEH,CAtBM;AAwBP,OAAO,MAAMQ,SAAS,GAAG,CAACC,WAAD,EAAcC,YAAd,KAA+B;AACpD,MAAGA,YAAH,EAAiB;AACbf,IAAAA,WAAW,GAAG,EAAC,GAAGA,WAAJ;AAAiB,SAAGe;AAApB,KAAd;AACH;;AACDb,EAAAA,OAAO,GAAG,EAAC,GAAGA,OAAJ;AAAa,OAAGY;AAAhB,GAAV;AACH,CALM","sourcesContent":["import {useState,useEffect} from 'react';\n\nlet globalState = {};\nlet listeners = [];\nlet actions = {};\n\nexport const useStore = () => {\n    const setState = useState(globalState)[1];\n\n    const dispatch = (actionIdentifier, payload) => {\n        const newState = actions[actionIdentifier](globalState, payload);\n        globalState = {...globalState, ...newState};\n\n        for (const listener of listeners){\n            listener(globalState);\n        }\n    };\n\n    useEffect(() => {\n        listeners.push(setState);\n\n        return () => {\n            listeners = listeners.filter(li => li !== setState);\n        }\n    },[setState]);\n\n    return [globalState, dispatch];\n    \n};\n\nexport const initStore = (userActions, initialState) => {\n    if(initialState) {\n        globalState = {...globalState, ...initialState};\n    }\n    actions = {...actions, ...userActions};\n}; "]},"metadata":{},"sourceType":"module"}